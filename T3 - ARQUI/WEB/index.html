<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ğŸ¡ Monitoreo y Control Ambiental para el Cultivo de Fresa en la Comunidad AgrÃ­cola de Laredo, Trujillo</title>
    <link rel="stylesheet" href="style.css"> 

    <!-- LibrerÃ­as externas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸ¡ Monitoreo y Control Ambiental para el Cultivo de Fresa en la Comunidad AgrÃ­cola de Laredo, Trujillo</h1>

        <div id="mqtt-status" class="status disconnected">
            Estado del MQTT: **Desconectado**
        </div>
        
        <h2>ğŸ“Š Datos de Sensores</h2>
        <div class="grid-container">
            
            <!-- Panel de Temperatura -->
            <div class="data-card" data-sensor="temperatura">
                <h3>ğŸŒ¡ï¸ Temperatura del Aire</h3>
                <p><span id="temperatura-valor" class="value">--</span><span class="unit"> Â°C</span></p>
                <p class="update-time" id="temperatura-tiempo">--</p>
                <div class="chart-wrapper">
                    <canvas id="chart-temperatura"></canvas>
                </div>
            </div>

            <!-- Panel de Humedad -->
            <div class="data-card" data-sensor="humedad-tierra">
                <h3>ğŸ’§ Humedad de la Tierra</h3>
                <p><span id="humedad-tierra-valor" class="value">--</span><span class="unit"> %</span></p>
                <p class="update-time" id="humedad-tierra-tiempo">--</p>
                <div class="chart-wrapper">
                    <canvas id="chart-humedad"></canvas>
                </div>
            </div>

            <!-- Panel de Nivel de Agua -->
            <div class="data-card" data-sensor="nivel-agua">
                <h3>ğŸŒŠ Nivel del Tanque de Agua</h3>
                <p><span id="nivel-agua-valor" class="value">--</span><span class="unit"> %</span></p>
                <p class="update-time" id="nivel-agua-tiempo">--</p>
                <div class="chart-wrapper">
                    <canvas id="chart-nivel"></canvas>
                </div>
            </div>
        </div>

        <hr>

        <h2>âš™ï¸ Control de Actuadores</h2>
        <div class="grid-container actuadores-grid"> 
            
            <div class="data-card control-card">
                <h3>ğŸ’§ Bomba de Riego</h3>
                <button class="control-button on-button" onclick="controlBomba('ON')">Encender</button>
                <button class="control-button off-button" onclick="controlBomba('OFF')">Apagar</button>
            </div>

            <div class="data-card control-card">
                <h3>ğŸ’¨ Ventilador</h3>
                <button class="control-button on-button" onclick="controlVentilador('ON')">Encender</button>
                <button class="control-button off-button" onclick="controlVentilador('OFF')">Apagar</button>
            </div>

            <div class="data-card control-card">
                <h3>ğŸ® Modo Manual</h3>
                <button class="control-button on-button" onclick="controlManual('ON')">Activar</button>
                <button class="control-button off-button" onclick="controlManual('OFF')">Desactivar</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script> 
</body>
</html>